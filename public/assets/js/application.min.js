window.angularApp=angular.module("TheVision",["ngRoute","ngSanitize","ngCookies"]),window.APIServer="",window.HTMLServer="../../",window.angularApp.run(["$rootScope","$cookieStore","$location",function(e,o,r){return e.logInUser=function(r){return o.put("username",r),e.userStatus.isLogin=!0,e.userStatus.name=r},e.logOut=function(r){return o["delete"]("username"),e.userStatus.isLogIn=!1},e.userStatus=o.get("username")?{isLogIn:!0,name:o.get("username")}:{isLogin:!1}}]),window.angularApp.config(["$routeProvider",function(e){return e.when("/",{templateUrl:window.HTMLServer+"/home.html",controller:"IndexController",access:{needLogIn:!1}}).when("/dashboard",{templateUrl:window.HTMLServer+"/dashboard.html",controller:"DashboardController",access:{needLogIn:!0}}).when("/room",{templateUrl:window.HTMLServer+"/show.html",controller:"RoomController",access:{needLogIn:!1}}).otherwise({redirectTo:"/"})}]),window.UI={enableModal:function(){return $(".modal-target").on("click",function(){var e;return e=$(this).data("modal"),console.log(e),$("#"+e).modal("setting","transition","fade up").modal("toggle")})},RoomUploaderToggle:function(){return $("#room").removeClass("has_uploader"),$("#room .player").removeClass("hidden"),$("#uploaderInfo").modal("show"),$(".status i").removeClass("red").addClass("green"),$(".status").html('<i class="pot green"></i> 已成功建立连接！')},init:function(){return this.enableModal()}},$(document).ready(function(){return window.UI.init()}),window.angularApp.controller("IndexController",["$scope","$rootScope","$http","$cookieStore","$location",function(e,o,r,n,t){return e.user={},e.regist=function(){return r({method:"POST",url:APIServer+"/register",data:{username:e.user.name,password:e.user.password}}).success(function(e,r){return e?(o.logInUser(user.name),t.path("/dashboard")):(o.logOut(user.name),$("#regist").modal("toggle"))})},UI.init()}]).controller("RoomController",["$scope","$rootScope","$http","$cookieStore","$location",function(e,o,r,n,t){return e.location=t,e.hasUploader=!!t.hash,UI.init()}]);